# 1. Node.js简介与环境搭建

## 1.1 Node.js简介

Node.js是一个基于Chrome V8引擎的JavaScript运行时环境，它允许开发者在服务器端运行JavaScript代码。Node.js采用事件驱动、非阻塞I/O模型，使其轻量且高效，非常适合构建可扩展的网络应用。

### 核心特点
- **事件驱动**：通过事件循环机制处理异步操作
- **非阻塞I/O**：高效处理并发请求，适合高并发场景
- **单线程**：避免了多线程的上下文切换开销
- **跨平台**：可在Windows、Linux、macOS等多种操作系统上运行
- **丰富的生态系统**：拥有全球最大的开源包管理系统npm

## 1.2 环境搭建

### 1.2.1 安装Node.js

#### 方法一：官方安装包（推荐）
1. 访问[Node.js官方网站](https://nodejs.org/)
2. 下载适合你操作系统的LTS（长期支持）版本
3. 运行安装程序，按照向导完成安装

#### 方法二：使用包管理器

**Windows（使用Chocolatey）**：
```powershell
choco install nodejs-lts
```

**macOS（使用Homebrew）**：
```bash
brew install node@20
```

**Linux（使用apt）**：
```bash
sudo apt update
sudo apt install nodejs npm
```

#### 方法三：使用nvm管理多个Node.js版本

nvm（Node Version Manager）是一个用于管理多个Node.js版本的工具，适合需要在不同项目间切换Node.js版本的开发者。

**安装nvm**：
```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
```

**使用nvm安装Node.js**：
```bash
# 安装最新LTS版本
nvm install --lts

# 安装指定版本
nvm install 20.10.0

# 切换使用的Node.js版本
nvm use 20.10.0
```

### 1.2.2 验证安装

安装完成后，打开终端（命令提示符），运行以下命令验证Node.js和npm是否安装成功：

```bash
# 查看Node.js版本
node -v

# 查看npm版本
npm -v
```

如果能看到版本号，说明安装成功。

## 1.3 第一个Node.js程序

### 1.3.1 创建简单的Hello World程序

1. 创建一个新的目录用于存放Node.js项目：

```bash
# Linux/macOS
mkdir ~/projects
cd ~/projects

# Windows CMD
mkdir %USERPROFILE%\projects
cd %USERPROFILE%\projects

# Windows PowerShell
mkdir $env:USERPROFILE\projects
cd $env:USERPROFILE\projects
```

2. 创建一个名为`hello-world.js`的文件，内容如下：

```javascript
console.log('Hello, Node.js!');
```

3. 在终端中运行这个文件：

```bash
node hello-world.js
```

你应该会看到输出：`Hello, Node.js!`

### 1.3.2 创建一个简单的HTTP服务器

Node.js的核心优势在于构建网络应用，下面我们创建一个简单的HTTP服务器：

1. 创建一个名为`server.js`的文件，内容如下：

```javascript
const http = require('node:http');

const hostname = '127.0.0.1';
const port = 3000;

const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello, World!\n');
});

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});
```

2. 运行这个服务器：

```bash
node server.js
```

3. 在浏览器中访问`http://127.0.0.1:3000/`，你应该会看到`Hello, World!`

4. 要停止服务器，在终端中按`Ctrl + C`

## 1.4 Node.js的模块化系统

Node.js采用CommonJS模块化系统，允许开发者将代码分割成多个模块，提高代码的可维护性和复用性。

### 1.4.1 创建和使用模块

1. 创建一个名为`greeting.js`的模块文件：

```javascript
// greeting.js
function sayHello(name) {
  return `Hello, ${name}!`;
}

module.exports = sayHello;
```

2. 创建一个名为`app.js`的主文件，引入并使用这个模块：

```javascript
// app.js
const sayHello = require('./greeting');

console.log(sayHello('Node.js'));
```

3. 运行`app.js`：

```bash
node app.js
```

输出：`Hello, Node.js!`

## 1.5 npm包管理工具

npm（Node Package Manager）是Node.js的包管理工具，用于安装、管理和发布Node.js包。

### 1.5.1 初始化npm项目

在项目目录中运行以下命令初始化一个npm项目：

```bash
npm init
```

按照提示输入项目信息，或者使用`npm init -y`快速创建一个默认的`package.json`文件。

### 1.5.2 安装npm包

```bash
# 安装包到项目依赖（生产环境）
npm install express

# 安装包到开发依赖
npm install --save-dev nodemon

# 全局安装包
npm install -g npm
```

### 1.5.3 使用npm脚本

在`package.json`文件中可以定义脚本命令，方便运行常用的命令：

```json
{
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  }
}
```

运行脚本命令：

```bash
# 运行start脚本
npm start

# 运行dev脚本
npm run dev
```

## 1.6 开发工具推荐

### 1.6.1 代码编辑器

- **Visual Studio Code**：微软开发的免费代码编辑器，对Node.js有很好的支持
- **WebStorm**：JetBrains开发的专业JavaScript IDE，功能强大但收费

### 1.6.2 常用插件

- **ESLint**：代码质量检查工具，帮助发现和修复代码中的问题
- **Prettier**：代码格式化工具，保持代码风格一致
- **Node.js Extension Pack**：VS Code的Node.js扩展包，包含多个有用的Node.js相关插件

## 1.7 学习资源

- [Node.js官方文档](https://nodejs.org/api/)
- [Node.js入门教程](https://nodejs.dev/learn/)
- [MDN Web Docs - Node.js](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs)
- [《Node.js实战》](https://www.oreilly.com/library/view/nodejs-in-action/9781617290576/)

## 1.8 实践练习

1. 安装Node.js和npm
2. 创建一个简单的Hello World程序
3. 创建一个HTTP服务器，返回当前时间
4. 创建一个模块化的项目，包含多个模块
5. 使用npm初始化项目，并安装一个第三方包（如express）

通过以上步骤，你已经完成了Node.js的基础环境搭建和入门学习。接下来，我们将深入学习Node.js的核心模块和高级特性。