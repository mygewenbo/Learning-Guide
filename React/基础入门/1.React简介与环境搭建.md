# React简介与环境搭建

## 一、React简介

### 1.1 什么是React

React是一个用于构建用户界面的JavaScript库，由Facebook（现Meta）开发并维护。它采用声明式、组件化的开发方式，使开发者能够高效地构建交互式Web应用。

### 1.2 React的起源

React最初由Facebook的工程师Jordan Walke创建，用于解决Facebook News Feed的性能问题。2013年5月，React在JSConf US上首次开源发布。自那以后，React迅速发展，成为最受欢迎的前端框架之一。

### 1.3 React的核心特点

#### 1.3.1 声明式编程

React采用声明式语法，你只需要描述UI在不同状态下应该是什么样子，React会自动处理从当前状态到目标状态的转换。

```javascript
// 声明式示例
function Greeting({ name }) {
  if (name) {
    return <h1>Hello, {name}!</h1>;
  } else {
    return <h1>Hello, Stranger!</h1>;
  }
}
```

#### 1.3.2 组件化开发

React将UI拆分为独立的、可复用的组件，每个组件管理自己的状态和逻辑。组件化开发使得代码更加模块化、可维护和可测试。

#### 1.3.3 虚拟DOM（Virtual DOM）

React使用虚拟DOM来优化渲染性能。当组件状态变化时，React首先在虚拟DOM中计算出最小的变更，然后只更新实际DOM中需要变化的部分，而不是重新渲染整个页面。

#### 1.3.4 单向数据流

React采用单向数据流，数据从父组件流向子组件，子组件通过回调函数与父组件通信。这种设计使得数据流向清晰，更容易调试和理解。

#### 1.3.5 跨平台支持

React不仅可以用于Web开发，还可以通过React Native构建移动应用，通过React Server Components实现服务端渲染，甚至可以用于VR开发。

### 1.4 React的版本历史

#### 主要版本里程碑

| 版本 | 发布时间 | 主要特性 |
|------|----------|----------|
| React 15 | 2016年4月 | 引入Class组件、生命周期方法 |
| React 16 | 2017年9月 | Fiber架构、Error Boundaries、Suspense |
| React 17 | 2020年10月 | 新的事件委托机制、渐进式升级支持 |
| React 18 | 2022年3月 | Concurrent React、Automatic Batching、Suspense for Data Fetching |
| React 19 | 2024年10月 | Actions API、use Hook、ref as prop、React Server Components稳定版 |

#### React 19的主要特性

- **Actions API**：简化异步状态转换
- **use Hook**：在渲染过程中读取资源
- **ref as prop**：无需forwardRef即可传递ref
- **React Server Components稳定版**：支持服务端组件
- **Activity组件**：保留UI状态
- **useEffectEvent**：提取非响应式逻辑
- **useActionState**：表单操作状态管理
- **cacheSignal**：React Server Components缓存

### 1.5 React的应用场景

- 单页应用（SPA）
- 复杂的交互式Web应用
- 移动应用（使用React Native）
- 服务端渲染应用（使用Next.js等框架）
- 桌面应用（使用Electron + React）
- VR/AR应用（使用React 360）

## 二、环境搭建

### 2.1 前置要求

在开始搭建React开发环境之前，你需要确保安装了以下软件：

#### 2.1.1 Node.js

React项目依赖Node.js环境。建议安装LTS（长期支持）版本。

- 下载地址：https://nodejs.org/
- 安装完成后，可以通过以下命令验证：
  ```bash
  node -v  # 查看Node.js版本
  npm -v   # 查看npm版本
  ```

#### 2.1.2 包管理器

Node.js默认安装npm，但你也可以使用yarn或pnpm，它们提供了更快的安装速度和更好的依赖管理。

- 安装yarn：
  ```bash
  npm install -g yarn
  yarn -v  # 验证安装
  ```

- 安装pnpm：
  ```bash
  npm install -g pnpm
  pnpm -v  # 验证安装
  ```

#### 2.1.3 代码编辑器

推荐使用VS Code，它提供了良好的React开发支持：

- 下载地址：https://code.visualstudio.com/
- 推荐扩展：
  - ES7+ React/Redux/React-Native snippets
  - Prettier - Code formatter
  - ESLint
  - React Developer Tools

### 2.2 使用Vite创建React项目

Vite是一个现代化的前端构建工具，提供了极速的开发服务器和优化的构建输出。我们将使用Vite来创建React项目。

#### 2.2.1 创建项目

打开终端，执行以下命令：

```bash
# 使用npm
npm create vite@latest my-react-app -- --template react

# 使用yarn
yarn create vite my-react-app --template react

# 使用pnpm
pnpm create vite my-react-app --template react
```

- `my-react-app`是你的项目名称，可以根据需要修改
- `--template react`指定使用React模板

#### 2.2.2 项目结构解析

创建完成后，进入项目目录：

```bash
cd my-react-app
```

项目结构如下：

```
my-react-app/
├── node_modules/       # 依赖包
├── public/             # 静态资源
│   └── vite.svg        # Vite图标
├── src/                # 源代码
│   ├── App.css         # App组件样式
│   ├── App.jsx         # App组件
│   ├── index.css       # 全局样式
│   ├── main.jsx        # 入口文件
│   └── vite-env.d.ts   # Vite环境类型定义
├── .gitignore          # Git忽略文件
├── index.html          # HTML模板
├── package.json        # 项目配置
├── README.md           # 项目说明
├── vite.config.js      # Vite配置
└── yarn.lock           # yarn依赖锁定文件（或package-lock.json）
```

主要文件说明：

- **index.html**：HTML模板文件，React应用将挂载到这个文件的root元素上
- **src/main.jsx**：React应用的入口文件，负责创建根节点并渲染App组件
- **src/App.jsx**：主应用组件，所有其他组件将作为其子组件
- **src/App.css**：App组件的样式文件
- **src/index.css**：全局样式文件
- **vite.config.js**：Vite的配置文件
- **package.json**：项目配置文件，包含依赖、脚本等信息

#### 2.2.3 安装依赖

创建项目后，需要安装依赖：

```bash
# 使用npm
npm install

# 使用yarn
yarn install

# 使用pnpm
pnpm install
```

#### 2.2.4 运行开发服务器

依赖安装完成后，运行以下命令启动开发服务器：

```bash
# 使用npm
npm run dev

# 使用yarn
yarn dev

# 使用pnpm
pnpm dev
```

启动成功后，终端会显示类似以下信息：

```
  VITE v5.0.0  ready in 300 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
  ➜  press h + enter to show help
```

现在，你可以在浏览器中访问 http://localhost:5173/ 查看你的React应用。

#### 2.2.5 构建生产版本

当应用开发完成后，可以运行以下命令构建生产版本：

```bash
# 使用npm
npm run build

# 使用yarn
yarn build

# 使用pnpm
pnpm build
```

构建完成后，生成的文件将位于`dist`目录中，可以部署到服务器上。

## 三、第一个React应用

### 3.1 编写第一个组件

让我们修改`src/App.jsx`文件，创建一个简单的问候组件：

```jsx
function App() {
  return (
    <div className="App">
      <header className="App-header">
        <h1>Hello, React!</h1>
        <p>这是我的第一个React应用</p>
      </header>
    </div>
  );
}

export default App;
```

### 3.2 理解JSX语法

JSX是JavaScript XML的缩写，是React中用于描述UI的语法扩展。它允许你在JavaScript中编写类似HTML的代码。

#### JSX的特点

1. **嵌入表达式**：使用`{}`在JSX中嵌入JavaScript表达式
   ```jsx
   const name = "React";
   <h1>Hello, {name}!</h1>
   ```

2. **属性**：使用引号传递字符串字面量，使用大括号传递JavaScript表达式
   ```jsx
   <div className="App"> {/* className替代class */}
     <img src={logo} alt="React logo" />
   </div>
   ```

3. **嵌套元素**：JSX元素可以嵌套，必须有一个根元素
   ```jsx
   <div>
     <h1>Hello</h1>
     <p>World</p>
   </div>
   ```

4. **条件渲染**：使用JavaScript条件表达式
   ```jsx
   {isLoggedIn ? <UserGreeting /> : <GuestGreeting />}
   ```

5. **列表渲染**：使用map()方法
   ```jsx
   const numbers = [1, 2, 3];
   <ul>
     {numbers.map((number) => (
       <li key={number}>{number}</li>
     ))}
   </ul>
   ```

### 3.3 渲染组件到DOM

React应用的入口文件是`src/main.jsx`，它负责将App组件渲染到DOM中：

```jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

这段代码做了以下事情：

1. 导入React和ReactDOM
2. 导入App组件和全局样式
3. 使用`ReactDOM.createRoot()`创建根节点，参数是DOM中的root元素
4. 调用`render()`方法将App组件渲染到根节点中
5. `<React.StrictMode>`是React的严格模式，用于检测潜在问题

## 四、开发工具

### 4.1 React Developer Tools

React Developer Tools是一个浏览器扩展，用于调试React应用。它允许你：

- 查看组件树
- 检查组件的props和state
- 跟踪组件的渲染性能
- 调试React Hooks

#### 安装方法

- Chrome：https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi
- Firefox：https://addons.mozilla.org/en-US/firefox/addon/react-devtools/
- Edge：https://microsoftedge.microsoft.com/addons/detail/react-developer-tools/gpphkfbcpidddadnkolkpfckpihlkkil

#### 使用方法

1. 安装扩展后，打开你的React应用
2. 打开浏览器开发者工具（F12或Ctrl+Shift+I）
3. 切换到"Components"或"Profiler"标签页

### 4.2 调试技巧

1. **使用console.log()**：在组件中添加console.log()来查看变量值
   ```jsx
   function App() {
     console.log("App组件渲染了");
     return <h1>Hello React</h1>;
   }
   ```

2. **使用debugger语句**：在代码中添加debugger语句，浏览器会在执行到此处时暂停
   ```jsx
   function App() {
     debugger;
     return <h1>Hello React</h1>;
   }
   ```

3. **使用React DevTools的Profiler**：分析组件的渲染性能，找出性能瓶颈

4. **使用ESLint和Prettier**：保持代码质量和一致性

## 五、常见问题与解决方案

### 5.1 端口被占用

如果启动开发服务器时提示端口被占用，可以使用`--port`选项指定其他端口：

```bash
npm run dev -- --port 3000
```

### 5.2 依赖安装失败

- 尝试清除npm缓存：`npm cache clean --force`
- 删除node_modules目录和package-lock.json文件，重新安装
- 检查网络连接，确保可以访问npm仓库

### 5.3 JSX语法错误

- 确保JSX元素有正确的闭合标签
- 确保只有一个根元素（或使用Fragment `<></>`）
- 确保在JSX中正确使用大括号和引号

### 5.4 组件不渲染

- 检查组件是否正确导出和导入
- 检查是否有语法错误
- 检查组件是否被正确渲染到DOM中

## 六、总结

本章节我们学习了：

1. React的定义、起源和核心特点
2. React的版本历史和最新特性
3. 环境搭建的前置要求
4. 使用Vite创建React项目的详细步骤
5. 项目结构解析
6. 第一个React应用的创建
7. JSX语法的基本概念
8. React Developer Tools的使用
9. 常见问题与解决方案

现在，你已经成功搭建了React开发环境，并创建了第一个React应用。接下来，我们将学习JSX语法、组件基础、状态管理等核心概念。

## 七、练习

1. 使用Vite创建一个新的React项目
2. 修改App组件，添加更多内容，如图片、列表、按钮等
3. 尝试使用不同的JSX语法，如条件渲染、列表渲染
4. 安装并使用React Developer Tools调试你的应用
5. 构建生产版本，查看生成的文件结构

---

**下一章预告**：JSX语法详解

在接下来的章节中，我们将深入学习JSX语法，包括表达式嵌入、条件渲染、列表渲染、样式处理等内容。