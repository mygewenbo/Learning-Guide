# Python数据结构

## 一、数据结构概述

数据结构是计算机存储、组织数据的方式。Python提供了多种内置的数据结构，用于存储和操作不同类型的数据。本章将详细介绍Python中最常用的数据结构：列表（list）、元组（tuple）、字典（dict）和集合（set）。

这些数据结构各有特点，适用于不同的场景：
- **列表**：有序、可变、允许重复元素
- **元组**：有序、不可变、允许重复元素
- **字典**：无序（Python 3.7+有序）、可变、键值对存储、键唯一
- **集合**：无序、可变、元素唯一

## 二、列表（list）

列表是Python中最常用的数据结构之一，用于存储有序的元素集合。列表中的元素可以是不同类型的数据，并且可以随时修改。

### 2.1 列表的定义和创建

#### 2.1.1 基本语法

```python
# 使用方括号创建列表
列表名 = [元素1, 元素2, 元素3, ...]

# 使用list()函数创建列表
列表名 = list(可迭代对象)
```

#### 2.1.2 示例

```python
# 创建空列表
empty_list = []
empty_list = list()

# 创建包含相同类型元素的列表
numbers = [1, 2, 3, 4, 5]
strings = ["apple", "banana", "orange"]

# 创建包含不同类型元素的列表
mixed = [1, "apple", 3.14, True]

# 使用list()函数创建列表
list_from_string = list("hello")  # ['h', 'e', 'l', 'l', 'o']
list_from_tuple = list((1, 2, 3))  # [1, 2, 3]
list_from_range = list(range(1, 6))  # [1, 2, 3, 4, 5]
```

### 2.2 列表的基本操作

#### 2.2.1 访问列表元素

使用索引访问列表中的元素，索引从0开始。

```python
fruits = ["apple", "banana", "orange", "grape"]

# 访问第一个元素
print(fruits[0])  # 输出：apple

# 访问最后一个元素
print(fruits[-1])  # 输出：grape

# 访问倒数第二个元素
print(fruits[-2])  # 输出：orange
```

#### 2.2.2 列表切片

使用切片操作可以访问列表中的一个子列表。

```python
# 基本语法：列表名[起始索引:结束索引:步长]
# 起始索引：包含该索引的元素
# 结束索引：不包含该索引的元素
# 步长：默认为1

numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

# 访问索引1到4的元素（不包含4）
print(numbers[1:4])  # 输出：[1, 2, 3]

# 访问索引0到5的元素，步长为2
print(numbers[0:6:2])  # 输出：[0, 2, 4]

# 访问从索引2到末尾的元素
print(numbers[2:])  # 输出：[2, 3, 4, 5, 6, 7, 8, 9]

# 访问从开头到索引5的元素
print(numbers[:6])  # 输出：[0, 1, 2, 3, 4, 5]

# 访问所有元素，步长为2
print(numbers[::2])  # 输出：[0, 2, 4, 6, 8]

# 反转列表
print(numbers[::-1])  # 输出：[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
```

#### 2.2.3 修改列表元素

通过索引可以修改列表中的元素。

```python
fruits = ["apple", "banana", "orange"]

# 修改第一个元素
fruits[0] = "grape"
print(fruits)  # 输出：['grape', 'banana', 'orange']

# 修改最后一个元素
fruits[-1] = "watermelon"
print(fruits)  # 输出：['grape', 'banana', 'watermelon']

# 使用切片修改多个元素
numbers = [1, 2, 3, 4, 5]
numbers[1:4] = [10, 20, 30]
print(numbers)  # 输出：[1, 10, 20, 30, 5]
```

#### 2.2.4 添加元素

- 使用`append()`方法在列表末尾添加一个元素
- 使用`extend()`方法在列表末尾添加多个元素
- 使用`insert()`方法在指定位置插入一个元素

```python
fruits = ["apple", "banana"]

# 使用append()方法添加一个元素
fruits.append("orange")
print(fruits)  # 输出：['apple', 'banana', 'orange']

# 使用extend()方法添加多个元素
fruits.extend(["grape", "watermelon"])
print(fruits)  # 输出：['apple', 'banana', 'orange', 'grape', 'watermelon']

# 使用insert()方法在指定位置插入元素
fruits.insert(1, "pear")
print(fruits)  # 输出：['apple', 'pear', 'banana', 'orange', 'grape', 'watermelon']
```

#### 2.2.5 删除元素

- 使用`del`语句删除指定位置的元素
- 使用`pop()`方法删除指定位置的元素，并返回该元素
- 使用`remove()`方法删除指定值的元素
- 使用`clear()`方法清空列表

```python
fruits = ["apple", "banana", "orange", "grape", "watermelon"]

# 使用del语句删除第一个元素
del fruits[0]
print(fruits)  # 输出：['banana', 'orange', 'grape', 'watermelon']

# 使用pop()方法删除最后一个元素，并返回该元素
last_fruit = fruits.pop()
print(last_fruit)  # 输出：watermelon
print(fruits)  # 输出：['banana', 'orange', 'grape']

# 使用pop()方法删除指定位置的元素
second_fruit = fruits.pop(1)
print(second_fruit)  # 输出：orange
print(fruits)  # 输出：['banana', 'grape']

# 使用remove()方法删除指定值的元素
fruits.remove("banana")
print(fruits)  # 输出：['grape']

# 使用clear()方法清空列表
fruits.clear()
print(fruits)  # 输出：[]
```

#### 2.2.6 列表长度

使用`len()`函数获取列表的长度。

```python
fruits = ["apple", "banana", "orange"]
print(len(fruits))  # 输出：3
```

#### 2.2.7 检查元素是否存在

使用`in`和`not in`运算符检查元素是否存在于列表中。

```python
fruits = ["apple", "banana", "orange"]

print("apple" in fruits)  # 输出：True
print("grape" in fruits)  # 输出：False
print("grape" not in fruits)  # 输出：True
```

#### 2.2.8 列表拼接

使用`+`运算符可以拼接两个列表。

```python
list1 = [1, 2, 3]
list2 = [4, 5, 6]
list3 = list1 + list2
print(list3)  # 输出：[1, 2, 3, 4, 5, 6]
```

#### 2.2.9 列表重复

使用`*`运算符可以重复列表中的元素。

```python
list1 = [1, 2, 3]
list2 = list1 * 3
print(list2)  # 输出：[1, 2, 3, 1, 2, 3, 1, 2, 3]
```

### 2.3 列表的常用方法

| 方法 | 描述 | 示例 |
|------|------|------|
| `append()` | 在列表末尾添加一个元素 | `fruits.append("orange")` |
| `extend()` | 在列表末尾添加多个元素 | `fruits.extend(["grape", "watermelon"]) ` |
| `insert()` | 在指定位置插入一个元素 | `fruits.insert(1, "pear")` |
| `remove()` | 删除第一个匹配的元素 | `fruits.remove("banana")` |
| `pop()` | 删除指定位置的元素，并返回该元素 | `fruits.pop(1)` |
| `clear()` | 清空列表 | `fruits.clear()` |
| `index()` | 返回第一个匹配元素的索引 | `fruits.index("apple")` |
| `count()` | 返回元素在列表中出现的次数 | `fruits.count("apple")` |
| `sort()` | 对列表进行排序 | `fruits.sort()` |
| `reverse()` | 反转列表 | `fruits.reverse()` |
| `copy()` | 返回列表的浅拷贝 | `new_fruits = fruits.copy()` |

#### 2.3.1 `index()`方法

返回第一个匹配元素的索引。

```python
fruits = ["apple", "banana", "orange", "banana"]
print(fruits.index("banana"))  # 输出：1
# print(fruits.index("grape"))  # 抛出ValueError异常
```

#### 2.3.2 `count()`方法

返回元素在列表中出现的次数。

```python
fruits = ["apple", "banana", "orange", "banana"]
print(fruits.count("banana"))  # 输出：2
print(fruits.count("grape"))  # 输出：0
```

#### 2.3.3 `sort()`方法

对列表进行排序。

```python
# 对数字列表排序
numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5]
numbers.sort()
print(numbers)  # 输出：[1, 1, 2, 3, 4, 5, 5, 6, 9]

# 对字符串列表排序
fruits = ["banana", "apple", "orange", "grape"]
fruits.sort()
print(fruits)  # 输出：['apple', 'banana', 'grape', 'orange']

# 倒序排序
numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5]
numbers.sort(reverse=True)
print(numbers)  # 输出：[9, 6, 5, 5, 4, 3, 2, 1, 1]

# 使用key参数排序
words = ["apple", "banana", "orange", "grape"]
words.sort(key=len)
print(words)  # 输出：['apple', 'grape', 'banana', 'orange']
```

#### 2.3.4 `reverse()`方法

反转列表。

```python
numbers = [1, 2, 3, 4, 5]
numbers.reverse()
print(numbers)  # 输出：[5, 4, 3, 2, 1]
```

#### 2.3.5 `copy()`方法

返回列表的浅拷贝。

```python
fruits = ["apple", "banana", "orange"]
new_fruits = fruits.copy()
print(new_fruits)  # 输出：['apple', 'banana', 'orange']

# 修改原列表，浅拷贝的列表不受影响
fruits.append("grape")
print(fruits)  # 输出：['apple', 'banana', 'orange', 'grape']
print(new_fruits)  # 输出：['apple', 'banana', 'orange']
```

### 2.4 列表的遍历

使用`for`循环遍历列表中的元素。

```python
fruits = ["apple", "banana", "orange"]

# 遍历元素
for fruit in fruits:
    print(fruit)

# 遍历索引和元素
for index, fruit in enumerate(fruits):
    print(f"索引{index}：{fruit}")

# 遍历索引
for index in range(len(fruits)):
    print(f"索引{index}：{fruits[index]}")
```

## 三、元组（tuple）

元组是一种有序、不可变的数据结构，用于存储一组相关的数据。元组与列表类似，但元组的元素不能修改。

### 3.1 元组的定义和创建

#### 3.1.1 基本语法

```python
# 使用圆括号创建元组
元组名 = (元素1, 元素2, 元素3, ...)

# 使用tuple()函数创建元组
元组名 = tuple(可迭代对象)
```

#### 3.1.2 示例

```python
# 创建空元组
empty_tuple = ()
empty_tuple = tuple()

# 创建包含相同类型元素的元组
numbers = (1, 2, 3, 4, 5)
strings = ("apple", "banana", "orange")

# 创建包含不同类型元素的元组
mixed = (1, "apple", 3.14, True)

# 创建只有一个元素的元组，需要在元素后加逗号
single_tuple = (1,)
print(type(single_tuple))  # 输出：<class 'tuple'>

# 不加逗号的话，会被认为是普通的括号
not_tuple = (1)
print(type(not_tuple))  # 输出：<class 'int'>

# 使用tuple()函数创建元组
tuple_from_string = tuple("hello")  # ('h', 'e', 'l', 'l', 'o')
tuple_from_list = tuple([1, 2, 3])  # (1, 2, 3)
tuple_from_range = tuple(range(1, 6))  # (1, 2, 3, 4, 5)
```

### 3.2 元组的基本操作

#### 3.2.1 访问元组元素

与列表类似，使用索引访问元组中的元素。

```python
fruits = ("apple", "banana", "orange", "grape")

# 访问第一个元素
print(fruits[0])  # 输出：apple

# 访问最后一个元素
print(fruits[-1])  # 输出：grape

# 访问倒数第二个元素
print(fruits[-2])  # 输出：orange
```

#### 3.2.2 元组切片

与列表类似，使用切片操作可以访问元组中的一个子元组。

```python
numbers = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)

# 访问索引1到4的元素（不包含4）
print(numbers[1:4])  # 输出：(1, 2, 3)

# 访问索引0到5的元素，步长为2
print(numbers[0:6:2])  # 输出：(0, 2, 4)

# 访问从索引2到末尾的元素
print(numbers[2:])  # 输出：(2, 3, 4, 5, 6, 7, 8, 9)

# 访问从开头到索引5的元素
print(numbers[:6])  # 输出：(0, 1, 2, 3, 4, 5)

# 访问所有元素，步长为2
print(numbers[::2])  # 输出：(0, 2, 4, 6, 8)

# 反转元组
print(numbers[::-1])  # 输出：(9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
```

#### 3.2.3 元组长度

使用`len()`函数获取元组的长度。

```python
fruits = ("apple", "banana", "orange")
print(len(fruits))  # 输出：3
```

#### 3.2.4 检查元素是否存在

使用`in`和`not in`运算符检查元素是否存在于元组中。

```python
fruits = ("apple", "banana", "orange")

print("apple" in fruits)  # 输出：True
print("grape" in fruits)  # 输出：False
print("grape" not in fruits)  # 输出：True
```

#### 3.2.5 元组拼接

使用`+`运算符可以拼接两个元组。

```python
tuple1 = (1, 2, 3)
tuple2 = (4, 5, 6)
tuple3 = tuple1 + tuple2
print(tuple3)  # 输出：(1, 2, 3, 4, 5, 6)
```

#### 3.2.6 元组重复

使用`*`运算符可以重复元组中的元素。

```python
tuple1 = (1, 2, 3)
tuple2 = tuple1 * 3
print(tuple2)  # 输出：(1, 2, 3, 1, 2, 3, 1, 2, 3)
```

### 3.3 元组的常用方法

元组的方法较少，因为元组是不可变的。

| 方法 | 描述 | 示例 |
|------|------|------|
| `index()` | 返回第一个匹配元素的索引 | `fruits.index("apple")` |
| `count()` | 返回元素在元组中出现的次数 | `fruits.count("apple")` |

#### 3.3.1 `index()`方法

返回第一个匹配元素的索引。

```python
fruits = ("apple", "banana", "orange", "banana")
print(fruits.index("banana"))  # 输出：1
# print(fruits.index("grape"))  # 抛出ValueError异常
```

#### 3.3.2 `count()`方法

返回元素在元组中出现的次数。

```python
fruits = ("apple", "banana", "orange", "banana")
print(fruits.count("banana"))  # 输出：2
print(fruits.count("grape"))  # 输出：0
```

### 3.4 元组与列表的区别

| 特性 | 列表（list） | 元组（tuple） |
|------|--------------|---------------|
| 定义方式 | 使用方括号`[]` | 使用圆括号`()` |
| 可变性 | 可变 | 不可变 |
| 方法 | 丰富（append、extend、insert、remove、pop等） | 较少（index、count） |
| 性能 | 相对较慢 | 相对较快 |
| 适用场景 | 需要频繁修改元素 | 元素不需要修改 |
| 内存占用 | 相对较大 | 相对较小 |

### 3.5 元组的遍历

与列表类似，使用`for`循环遍历元组中的元素。

```python
fruits = ("apple", "banana", "orange")

# 遍历元素
for fruit in fruits:
    print(fruit)

# 遍历索引和元素
for index, fruit in enumerate(fruits):
    print(f"索引{index}：{fruit}")

# 遍历索引
for index in range(len(fruits)):
    print(f"索引{index}：{fruits[index]}")
```

## 四、字典（dict）

字典是一种无序（Python 3.7+有序）、可变的数据结构，用于存储键值对。字典中的键必须是唯一的，且必须是不可变类型（如字符串、数字、元组）。

### 4.1 字典的定义和创建

#### 4.1.1 基本语法

```python
# 使用花括号创建字典
字典名 = {键1: 值1, 键2: 值2, 键3: 值3, ...}

# 使用dict()函数创建字典
字典名 = dict(键1=值1, 键2=值2, 键3=值3, ...)
字典名 = dict([(键1, 值1), (键2, 值2), (键3, 值3), ...])
```

#### 4.1.2 示例

```python
# 创建空字典
empty_dict = {}
empty_dict = dict()

# 创建包含键值对的字典
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 使用dict()函数创建字典
person1 = dict(name="Bob", age=30, city="London")
person2 = dict([("name", "Charlie"), ("age", 35), ("city", "Paris")])

# 从列表创建字典
keys = ["name", "age", "city"]
values = ["David", 40, "Tokyo"]
person3 = dict(zip(keys, values))

print(person)  # 输出：{'name': 'Alice', 'age': 25, 'city': 'New York'}
print(person1)  # 输出：{'name': 'Bob', 'age': 30, 'city': 'London'}
print(person2)  # 输出：{'name': 'Charlie', 'age': 35, 'city': 'Paris'}
print(person3)  # 输出：{'name': 'David', 'age': 40, 'city': 'Tokyo'}
```

### 4.2 字典的基本操作

#### 4.2.1 访问字典元素

使用键访问字典中的值。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 使用键访问值
print(person["name"])  # 输出：Alice
print(person["age"])  # 输出：25

# 使用get()方法访问值
print(person.get("city"))  # 输出：New York
print(person.get("gender"))  # 输出：None
print(person.get("gender", "unknown"))  # 输出：unknown
```

#### 4.2.2 修改字典元素

通过键可以修改字典中的值。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 修改现有键的值
person["age"] = 26
print(person)  # 输出：{'name': 'Alice', 'age': 26, 'city': 'New York'}

# 添加新的键值对
person["gender"] = "female"
print(person)  # 输出：{'name': 'Alice', 'age': 26, 'city': 'New York', 'gender': 'female'}
```

#### 4.2.3 删除字典元素

- 使用`del`语句删除指定键的键值对
- 使用`pop()`方法删除指定键的键值对，并返回该值
- 使用`popitem()`方法删除最后一个键值对，并返回该键值对
- 使用`clear()`方法清空字典

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York",
    "gender": "female"
}

# 使用del语句删除指定键的键值对
del person["gender"]
print(person)  # 输出：{'name': 'Alice', 'age': 25, 'city': 'New York'}

# 使用pop()方法删除指定键的键值对，并返回该值
age = person.pop("age")
print(age)  # 输出：25
print(person)  # 输出：{'name': 'Alice', 'city': 'New York'}

# 使用popitem()方法删除最后一个键值对，并返回该键值对
item = person.popitem()
print(item)  # 输出：('city', 'New York')
print(person)  # 输出：{'name': 'Alice'}

# 使用clear()方法清空字典
person.clear()
print(person)  # 输出：{}
```

#### 4.2.4 字典长度

使用`len()`函数获取字典的长度（即键值对的数量）。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}
print(len(person))  # 输出：3
```

#### 4.2.5 检查键是否存在

使用`in`和`not in`运算符检查键是否存在于字典中。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

print("name" in person)  # 输出：True
print("gender" in person)  # 输出：False
print("gender" not in person)  # 输出：True
```

### 4.3 字典的常用方法

| 方法 | 描述 | 示例 |
|------|------|------|
| `get()` | 返回指定键的值，如果键不存在则返回默认值 | `person.get("name")` |
| `keys()` | 返回字典中所有键的视图 | `person.keys()` |
| `values()` | 返回字典中所有值的视图 | `person.values()` |
| `items()` | 返回字典中所有键值对的视图 | `person.items()` |
| `update()` | 使用另一个字典或键值对更新字典 | `person.update({"age": 26})` |
| `pop()` | 删除指定键的键值对，并返回该值 | `person.pop("age")` |
| `popitem()` | 删除最后一个键值对，并返回该键值对 | `person.popitem()` |
| `clear()` | 清空字典 | `person.clear()` |
| `copy()` | 返回字典的浅拷贝 | `new_person = person.copy()` |
| `fromkeys()` | 创建一个新字典，使用指定的键和默认值 | `dict.fromkeys(["name", "age"], "unknown")` |

#### 4.3.1 `keys()`、`values()`和`items()`方法

返回字典中所有键、值和键值对的视图。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 获取所有键
print(person.keys())  # 输出：dict_keys(['name', 'age', 'city'])
print(list(person.keys()))  # 输出：['name', 'age', 'city']

# 获取所有值
print(person.values())  # 输出：dict_values(['Alice', 25, 'New York'])
print(list(person.values()))  # 输出：['Alice', 25, 'New York']

# 获取所有键值对
print(person.items())  # 输出：dict_items([('name', 'Alice'), ('age', 25), ('city', 'New York')])
print(list(person.items()))  # 输出：[('name', 'Alice'), ('age', 25), ('city', 'New York')]
```

#### 4.3.2 `update()`方法

使用另一个字典或键值对更新字典。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 使用字典更新
person.update({"age": 26, "gender": "female"})
print(person)  # 输出：{'name': 'Alice', 'age': 26, 'city': 'New York', 'gender': 'female'}

# 使用关键字参数更新
person.update(age=27, phone="123-456-7890")
print(person)  # 输出：{'name': 'Alice', 'age': 27, 'city': 'New York', 'gender': 'female', 'phone': '123-456-7890'}
```

#### 4.3.3 `copy()`方法

返回字典的浅拷贝。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

new_person = person.copy()
new_person["age"] = 26

print(person)  # 输出：{'name': 'Alice', 'age': 25, 'city': 'New York'}
print(new_person)  # 输出：{'name': 'Alice', 'age': 26, 'city': 'New York'}
```

#### 4.3.4 `fromkeys()`方法

创建一个新字典，使用指定的键和默认值。

```python
# 使用默认值None
keys = ["name", "age", "city"]
dict1 = dict.fromkeys(keys)
print(dict1)  # 输出：{'name': None, 'age': None, 'city': None}

# 使用指定的默认值
dict2 = dict.fromkeys(keys, "unknown")
print(dict2)  # 输出：{'name': 'unknown', 'age': 'unknown', 'city': 'unknown'}
```

### 4.4 字典的遍历

使用`for`循环遍历字典中的键、值或键值对。

```python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}

# 遍历键
for key in person:
    print(key, person[key])

for key in person.keys():
    print(key, person[key])

# 遍历值
for value in person.values():
    print(value)

# 遍历键值对
for key, value in person.items():
    print(key, value)
```

## 五、集合（set）

集合是一种无序、可变的数据结构，用于存储唯一的元素。集合中的元素必须是不可变类型（如字符串、数字、元组）。

### 5.1 集合的定义和创建

#### 5.1.1 基本语法

```python
# 使用花括号创建集合
集合名 = {元素1, 元素2, 元素3, ...}

# 使用set()函数创建集合
集合名 = set(可迭代对象)
```

#### 5.1.2 示例

```python
# 创建空集合
empty_set = set()
# empty_set = {}  # 这是一个空字典，不是空集合

# 创建包含元素的集合
numbers = {1, 2, 3, 4, 5}
strings = {"apple", "banana", "orange"}

# 创建包含不同类型元素的集合
mixed = {1, "apple", 3.14, True}

# 使用set()函数创建集合
set_from_string = set("hello")  # {'h', 'e', 'l', 'o'}（自动去重）
set_from_list = set([1, 2, 3, 2, 1])  # {1, 2, 3}（自动去重）
set_from_tuple = set((1, 2, 3, 2, 1))  # {1, 2, 3}（自动去重）
set_from_range = set(range(1, 6))  # {1, 2, 3, 4, 5}

print(numbers)  # 输出：{1, 2, 3, 4, 5}
print(strings)  # 输出：{'apple', 'banana', 'orange'}
print(mixed)  # 输出：{1, 3.14, 'apple'}（注意：1和True在集合中视为同一个元素）
print(set_from_string)  # 输出：{'h', 'e', 'l', 'o'}
```

### 5.2 集合的基本操作

#### 5.2.1 添加元素

- 使用`add()`方法添加一个元素
- 使用`update()`方法添加多个元素

```python
fruits = {"apple", "banana", "orange"}

# 使用add()方法添加一个元素
fruits.add("grape")
print(fruits)  # 输出：{'apple', 'banana', 'orange', 'grape'}

# 使用update()方法添加多个元素
fruits.update(["watermelon", "pear"])
print(fruits)  # 输出：{'apple', 'banana', 'orange', 'grape', 'watermelon', 'pear'}

# 添加重复元素，不会有任何效果
fruits.add("apple")
print(fruits)  # 输出：{'apple', 'banana', 'orange', 'grape', 'watermelon', 'pear'}
```

#### 5.2.2 删除元素

- 使用`remove()`方法删除指定元素，如果元素不存在则抛出异常
- 使用`discard()`方法删除指定元素，如果元素不存在则不做任何操作
- 使用`pop()`方法删除并返回任意一个元素
- 使用`clear()`方法清空集合

```python
fruits = {"apple", "banana", "orange", "grape", "watermelon", "pear"}

# 使用remove()方法删除指定元素
fruits.remove("banana")
print(fruits)  # 输出：{'apple', 'orange', 'grape', 'watermelon', 'pear'}
# fruits.remove("mango")  # 抛出KeyError异常

# 使用discard()方法删除指定元素
fruits.discard("orange")
print(fruits)  # 输出：{'apple', 'grape', 'watermelon', 'pear'}
fruits.discard("mango")  # 不会抛出异常

# 使用pop()方法删除并返回任意一个元素
random_fruit = fruits.pop()
print(random_fruit)  # 输出：apple（可能不同，因为集合是无序的）
print(fruits)  # 输出：{'grape', 'watermelon', 'pear'}

# 使用clear()方法清空集合
fruits.clear()
print(fruits)  # 输出：set()
```

#### 5.2.3 集合长度

使用`len()`函数获取集合的长度。

```python
fruits = {"apple", "banana", "orange"}
print(len(fruits))  # 输出：3
```

#### 5.2.4 检查元素是否存在

使用`in`和`not in`运算符检查元素是否存在于集合中。

```python
fruits = {"apple", "banana", "orange"}

print("apple" in fruits)  # 输出：True
print("grape" in fruits)  # 输出：False
print("grape" not in fruits)  # 输出：True
```

### 5.3 集合的常用方法

| 方法 | 描述 | 示例 |
|------|------|------|
| `add()` | 添加一个元素到集合 | `fruits.add("grape")` |
| `update()` | 添加多个元素到集合 | `fruits.update(["watermelon", "pear"]) ` |
| `remove()` | 删除指定元素，如果元素不存在则抛出异常 | `fruits.remove("banana")` |
| `discard()` | 删除指定元素，如果元素不存在则不做任何操作 | `fruits.discard("orange")` |
| `pop()` | 删除并返回任意一个元素 | `fruits.pop()` |
| `clear()` | 清空集合 | `fruits.clear()` |
| `copy()` | 返回集合的浅拷贝 | `new_fruits = fruits.copy()` |
| `union()` | 返回两个集合的并集 | `set1.union(set2)` |
| `intersection()` | 返回两个集合的交集 | `set1.intersection(set2)` |
| `difference()` | 返回两个集合的差集 | `set1.difference(set2)` |
| `symmetric_difference()` | 返回两个集合的对称差集 | `set1.symmetric_difference(set2)` |
| `issubset()` | 检查一个集合是否是另一个集合的子集 | `set1.issubset(set2)` |
| `issuperset()` | 检查一个集合是否是另一个集合的超集 | `set1.issuperset(set2)` |
| `isdisjoint()` | 检查两个集合是否不相交 | `set1.isdisjoint(set2)` |

### 5.4 集合的运算

#### 5.4.1 并集

返回包含两个集合中所有元素的集合。

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# 使用union()方法
print(set1.union(set2))  # 输出：{1, 2, 3, 4, 5, 6, 7, 8}

# 使用|运算符
print(set1 | set2)  # 输出：{1, 2, 3, 4, 5, 6, 7, 8}
```

#### 5.4.2 交集

返回包含两个集合中共同元素的集合。

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# 使用intersection()方法
print(set1.intersection(set2))  # 输出：{4, 5}

# 使用&运算符
print(set1 & set2)  # 输出：{4, 5}
```

#### 5.4.3 差集

返回包含在第一个集合中但不在第二个集合中的元素的集合。

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# 使用difference()方法
print(set1.difference(set2))  # 输出：{1, 2, 3}
print(set2.difference(set1))  # 输出：{6, 7, 8}

# 使用-运算符
print(set1 - set2)  # 输出：{1, 2, 3}
print(set2 - set1)  # 输出：{6, 7, 8}
```

#### 5.4.4 对称差集

返回包含在两个集合中但不在它们交集中的元素的集合。

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# 使用symmetric_difference()方法
print(set1.symmetric_difference(set2))  # 输出：{1, 2, 3, 6, 7, 8}

# 使用^运算符
print(set1 ^ set2)  # 输出：{1, 2, 3, 6, 7, 8}
```

#### 5.4.5 子集和超集

- 子集：如果集合A的所有元素都在集合B中，则A是B的子集
- 超集：如果集合B包含集合A的所有元素，则B是A的超集

```python
set1 = {1, 2, 3}
set2 = {1, 2, 3, 4, 5}
set3 = {6, 7, 8}

# 检查子集
print(set1.issubset(set2))  # 输出：True
print(set2.issubset(set1))  # 输出：False

# 使用<=运算符
print(set1 <= set2)  # 输出：True
print(set1 < set2)  # 输出：True（真子集）
print(set1 <= set1)  # 输出：True（集合是自身的子集）

# 检查超集
print(set2.issuperset(set1))  # 输出：True
print(set1.issuperset(set2))  # 输出：False

# 使用>=运算符
print(set2 >= set1)  # 输出：True
print(set2 > set1)  # 输出：True（真超集）
print(set1 >= set1)  # 输出：True（集合是自身的超集）

# 检查不相交
print(set1.isdisjoint(set3))  # 输出：True
print(set1.isdisjoint(set2))  # 输出：False
```

### 5.5 集合的遍历

使用`for`循环遍历集合中的元素。

```python
fruits = {"apple", "banana", "orange"}

for fruit in fruits:
    print(fruit)
```

## 六、数据结构的选择

| 数据结构 | 特点 | 适用场景 |
|----------|------|----------|
| 列表（list） | 有序、可变、允许重复元素 | 需要存储有序的、可能重复的数据，并且需要频繁修改 |
| 元组（tuple） | 有序、不可变、允许重复元素 | 需要存储有序的、可能重复的数据，并且不需要修改 |
| 字典（dict） | 无序（Python 3.7+有序）、可变、键值对存储、键唯一 | 需要存储键值对数据，并且需要通过键快速访问值 |
| 集合（set） | 无序、可变、元素唯一 | 需要存储唯一的元素，并且需要进行集合运算 |

## 七、综合示例

### 7.1 学生管理系统

```python
# 学生管理系统
students = []

# 添加学生
def add_student():
    name = input("请输入学生姓名：")
    age = int(input("请输入学生年龄："))
    gender = input("请输入学生性别：")
    student = {
        "name": name,
        "age": age,
        "gender": gender
    }
    students.append(student)
    print(f"成功添加学生：{name}")

# 显示所有学生
def show_students():
    if not students:
        print("暂无学生信息")
        return
    print("学生信息：")
    for index, student in enumerate(students):
        print(f"{index+1}. 姓名：{student['name']}，年龄：{student['age']}，性别：{student['gender']}")

# 查找学生
def find_student():
    name = input("请输入要查找的学生姓名：")
    for student in students:
        if student['name'] == name:
            print(f"找到学生：姓名：{student['name']}，年龄：{student['age']}，性别：{student['gender']}")
            return
    print(f"未找到姓名为{name}的学生")

# 删除学生
def delete_student():
    name = input("请输入要删除的学生姓名：")
    for index, student in enumerate(students):
        if student['name'] == name:
            del students[index]
            print(f"成功删除学生：{name}")
            return
    print(f"未找到姓名为{name}的学生")

# 主菜单
def main():
    while True:
        print("\n学生管理系统")
        print("1. 添加学生")
        print("2. 显示所有学生")
        print("3. 查找学生")
        print("4. 删除学生")
        print("5. 退出系统")
        choice = input("请输入您的选择：")
        if choice == "1":
            add_student()
        elif choice == "2":
            show_students()
        elif choice == "3":
            find_student()
        elif choice == "4":
            delete_student()
        elif choice == "5":
            print("退出系统")
            break
        else:
            print("无效的选择，请重新输入")

if __name__ == "__main__":
    main()
```

### 7.2 单词计数

```python
# 单词计数
text = "Hello world! Hello Python! Hello world!"

# 将文本转换为小写，并去除标点符号
text = text.lower().replace("!", "").replace(",", "").replace(".", "")

# 分割文本为单词列表
words = text.split()

# 使用字典计数
word_count = {}
for word in words:
    if word in word_count:
        word_count[word] += 1
    else:
        word_count[word] = 1

print("单词计数结果：")
for word, count in word_count.items():
    print(f"{word}: {count}")

# 使用collections.Counter计数
from collections import Counter
word_count = Counter(words)
print("\n使用Counter计数结果：")
for word, count in word_count.items():
    print(f"{word}: {count}")
```

## 八、常见问题与解决方案

### 8.1 列表索引越界

- **问题**：访问列表时使用了超出列表长度的索引
- **解决方案**：确保使用的索引在0到列表长度-1之间

```python
# 错误示例：列表索引越界
fruits = ["apple", "banana", "orange"]
# print(fruits[3])  # 抛出IndexError异常

# 正确示例
if len(fruits) > 3:
    print(fruits[3])
else:
    print("索引超出范围")
```

### 8.2 元组不可修改

- **问题**：尝试修改元组中的元素
- **解决方案**：如果需要修改元素，使用列表代替元组

```python
# 错误示例：元组不可修改
fruits = ("apple", "banana", "orange")
# fruits[0] = "grape"  # 抛出TypeError异常

# 正确示例：使用列表
fruits = ["apple", "banana", "orange"]
fruits[0] = "grape"
```

### 8.3 字典键不存在

- **问题**：访问字典时使用了不存在的键
- **解决方案**：使用`get()`方法访问字典，或者先检查键是否存在

```python
# 错误示例：字典键不存在
person = {"name": "Alice", "age": 25}
# print(person["gender"])  # 抛出KeyError异常

# 正确示例：使用get()方法
print(person.get("gender"))  # 输出：None
print(person.get("gender", "unknown"))  # 输出：unknown

# 正确示例：先检查键是否存在
if "gender" in person:
    print(person["gender"])
else:
    print("gender键不存在")
```

### 8.4 集合元素必须是不可变类型

- **问题**：尝试将可变类型（如列表、字典）添加到集合中
- **解决方案**：使用不可变类型（如字符串、数字、元组）作为集合元素

```python
# 错误示例：集合元素必须是不可变类型
# set1 = {1, 2, [3, 4]}  # 抛出TypeError异常

# 正确示例：使用元组代替列表
set1 = {1, 2, (3, 4)}
```

## 九、总结

本章介绍了Python的四种常用数据结构：列表、元组、字典和集合。

1. **列表**：有序、可变、允许重复元素，用于存储有序的、可能重复的数据，并且需要频繁修改。
2. **元组**：有序、不可变、允许重复元素，用于存储有序的、可能重复的数据，并且不需要修改。
3. **字典**：无序（Python 3.7+有序）、可变、键值对存储、键唯一，用于存储键值对数据，并且需要通过键快速访问值。
4. **集合**：无序、可变、元素唯一，用于存储唯一的元素，并且需要进行集合运算。

通过本章的学习，你应该已经掌握了Python的常用数据结构，可以根据不同的场景选择合适的数据结构来存储和操作数据。接下来，我们将学习Python的函数。

## 十、练习

1. 编写一个Python程序，创建一个列表，包含1到10的整数，然后输出列表的长度、第一个元素、最后一个元素和中间元素。
2. 编写一个Python程序，创建一个列表，包含5个字符串，然后使用append()方法添加一个字符串，使用extend()方法添加两个字符串，使用insert()方法在第三个位置插入一个字符串。
3. 编写一个Python程序，创建一个列表，包含10个整数，然后对列表进行排序和反转。
4. 编写一个Python程序，创建一个元组，包含5个字符串，然后输出元组的长度、第一个元素和最后一个元素。
5. 编写一个Python程序，创建一个字典，包含5个键值对，然后输出字典的所有键、所有值和所有键值对。
6. 编写一个Python程序，创建一个集合，包含5个整数，然后添加一个整数，删除一个整数，输出集合的长度。
7. 编写一个Python程序，创建两个集合，然后计算它们的并集、交集、差集和对称差集。
8. 编写一个Python程序，统计一个字符串中每个字符出现的次数，使用字典存储结果。
9. 编写一个Python程序，创建一个列表，包含10个随机整数，然后去除重复元素，使用集合实现。
10. 编写一个Python程序，实现一个简单的购物车功能，包括添加商品、删除商品、显示购物车和计算总价。

## 十一、参考资料

1. Python官方文档：https://docs.python.org/zh-cn/3/tutorial/datastructures.html
2. 《Python编程：从入门到实践》（Eric Matthes）
3. 《流畅的Python》（Luciano Ramalho）
4. 《Python核心编程》（Wesley Chun）