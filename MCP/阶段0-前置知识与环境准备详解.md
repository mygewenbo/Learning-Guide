# MCP 学习计划 - 阶段 0：前置知识与环境准备详解

> **本文档目标**：帮助任何人从零开始，理解 MCP 所需的前置知识，并完成开发环境的搭建。即使你是编程新手，也能通过本文档顺利入门。

---

## 📚 目录

1. [什么是 MCP？为什么要学习它？](#1-什么是-mcp为什么要学习它)
2. [前置知识详解](#2-前置知识详解)
3. [环境准备详细步骤](#3-环境准备详细步骤)
4. [推荐阅读资料](#4-推荐阅读资料)
5. [环境验证与测试](#5-环境验证与测试)
6. [常见问题解答](#6-常见问题解答)

---

## 1. 什么是 MCP？为什么要学习它？

### 1.1 MCP 的全称与定义

**MCP** 全称是 **Model Context Protocol**（模型上下文协议），它是一个**开放标准协议**，用于规范 AI 应用（特别是大语言模型）如何与外部数据源、工具和服务进行交互。

### 1.2 用生活中的例子理解 MCP

想象一下：

- **没有 MCP 之前**：就像每个电器都有自己独特的插头，你需要为每个设备准备不同的转换器。如果你想让 AI 助手访问数据库、调用天气 API、读取文件，你需要为每个功能写一套独特的对接代码。

- **有了 MCP 之后**：就像现在的 USB-C 接口，所有设备都遵循同一个标准。任何支持 MCP 的工具（Server）都可以被任何支持 MCP 的应用（Client/Host）使用，无需重复开发。

### 1.3 MCP 解决的核心问题

1. **标准化**：统一了 AI 应用与外部系统的交互方式
2. **可复用性**：一次开发，到处使用
3. **可扩展性**：轻松添加新的工具和数据源
4. **互操作性**：不同的 AI 应用可以共享同一套工具

### 1.4 学习 MCP 的价值

- **对开发者**：掌握 AI 时代的核心技能，能够快速构建 AI 应用
- **对企业**：降低 AI 应用开发成本，提高开发效率
- **对生态**：推动 AI 工具的标准化和共享

---

## 2. 前置知识详解

### 2.1 大语言模型（LLM）基础

#### 什么是大语言模型？

大语言模型（Large Language Model，简称 LLM）是一种 AI 系统，它通过学习大量文本数据，能够理解和生成人类语言。

**常见的 LLM 例子**：
- OpenAI 的 GPT-4
- Anthropic 的 Claude
- Google 的 Gemini
- 国内的 DeepSeek、通义千问、文心一言等

#### LLM 的基本工作原理（简化版）

```
用户输入 → LLM 处理 → 生成回答
```

**例子**：
```
用户：今天天气怎么样？
LLM：抱歉，我无法实时获取天气信息。
```

这里的问题是：LLM 本身**无法访问实时数据**，它只能基于训练时的知识回答。

#### LLM 的局限性

1. **知识截止日期**：只知道训练时的信息
2. **无法访问实时数据**：不能查询数据库、调用 API
3. **无法执行操作**：不能发送邮件、修改文件

**这就是为什么需要"工具调用"！**

---

### 2.2 工具调用（Function Calling）概念

#### 什么是工具调用？

工具调用（也叫函数调用、Function Calling）是让 LLM 能够**主动调用外部工具**来完成任务的技术。

#### 工作流程图解

```
┌─────────────┐
│   用户提问   │
│"北京天气？" │
└──────┬──────┘
       │
       ▼
┌─────────────────────────┐
│   LLM 分析并决定        │
│   需要调用天气查询工具   │
└──────┬──────────────────┘
       │
       ▼
┌─────────────────────────┐
│   调用天气 API          │
│   get_weather("北京")   │
└──────┬──────────────────┘
       │
       ▼
┌─────────────────────────┐
│   返回结果给 LLM        │
│   "晴天，25°C"          │
└──────┬──────────────────┘
       │
       ▼
┌─────────────────────────┐
│   LLM 生成最终回答      │
│   "北京今天晴天，       │
│    温度 25 度，适合出行" │
└─────────────────────────┘
```

#### 为什么需要标准协议？

**问题场景**：
- 公司 A 开发了一个天气查询工具
- 公司 B 开发了一个数据库查询工具
- 公司 C 开发了一个邮件发送工具

如果没有标准协议，每个 AI 应用都需要：
1. 学习不同工具的调用方式
2. 编写不同的对接代码
3. 维护多套集成方案

**MCP 的解决方案**：
- 所有工具都遵循 MCP 标准
- AI 应用只需要学会 MCP 协议
- 一次集成，支持所有 MCP 工具

---

### 2.3 基础后端知识

#### 2.3.1 JSON 格式

**JSON**（JavaScript Object Notation）是一种轻量级的数据交换格式，人类易读，机器易解析。

**基本语法**：

```json
{
  "name": "张三",
  "age": 25,
  "skills": ["Python", "JavaScript"],
  "isStudent": false
}
```

**关键概念**：
- 使用 `{}` 表示对象
- 使用 `[]` 表示数组
- 键值对用 `:` 分隔
- 多个键值对用 `,` 分隔

**为什么 MCP 需要 JSON？**
- MCP 协议中的消息都是 JSON 格式
- 工具的参数和返回值都用 JSON 表示

#### 2.3.2 HTTP 基础

**HTTP**（HyperText Transfer Protocol）是互联网上应用最广泛的通信协议。

**基本概念**：

```
客户端 ──HTTP 请求──> 服务器
客户端 <──HTTP 响应── 服务器
```

**常见 HTTP 方法**：
- `GET`：获取数据
- `POST`：提交数据
- `PUT`：更新数据
- `DELETE`：删除数据

**为什么 MCP 需要 HTTP？**
- MCP 可以通过 HTTP 传输（SSE 方式）
- 调用外部 API 时需要 HTTP 知识

#### 2.3.3 异步编程基础

**什么是异步编程？**

**同步执行**（一个接一个）：
```
任务1 执行（耗时 2 秒）
  ↓
任务2 执行（耗时 3 秒）
  ↓
任务3 执行（耗时 1 秒）
总耗时：6 秒
```

**异步执行**（同时进行）：
```
任务1 执行（耗时 2 秒）
任务2 执行（耗时 3 秒）  ← 同时开始
任务3 执行（耗时 1 秒）
总耗时：3 秒（最长的那个）
```

**Python 异步示例**：

```python
import asyncio
import time

# 同步版本
def fetch_data():
    time.sleep(2)  # 模拟网络请求
    return "数据"

# 异步版本
async def fetch_data_async():
    await asyncio.sleep(2)  # 模拟网络请求
    return "数据"
```

**为什么 MCP 需要异步？**
- 工具调用可能很耗时（如网络请求、数据库查询）
- 异步可以提高效率，避免阻塞

---

### 2.4 编程语言选择

#### 2.4.1 Python vs TypeScript

MCP 官方提供了两种语言的 SDK：

| 特性 | Python | TypeScript |
|------|--------|------------|
| **学习难度** | 较简单 | 中等 |
| **生态支持** | 数据科学、AI 库丰富 | Web 开发、前端友好 |
| **异步支持** | `async/await` | `async/await` |
| **适合人群** | AI/数据科学开发者 | Web/全栈开发者 |
| **MCP SDK** | `mcp` | `@modelcontextprotocol/sdk` |

#### 2.4.2 推荐选择

**选择 Python，如果你：**
- 主要做 AI、数据分析、科学计算
- 想快速上手，语法简单
- 需要使用 Python 的 AI 库（如 LangChain、OpenAI SDK）

**选择 TypeScript，如果你：**
- 主要做 Web 开发
- 需要构建前端界面
- 熟悉 JavaScript 生态

**本教程的建议**：
- **初学者**：推荐 Python（语法简单，学习曲线平缓）
- **Web 开发者**：推荐 TypeScript（与现有技能栈匹配）

---

## 3. 环境准备详细步骤

### 3.1 Python 环境搭建

#### 3.1.1 检查 Python 版本

**要求**：Python 3.10 或更高版本

**检查方法**：

```bash
# Windows 用户
python --version

# Mac/Linux 用户
python3 --version
```

**期望输出**：
```
Python 3.10.x 或更高
```

#### 3.1.2 安装 Python（如果未安装）

**Windows 用户**：

1. 访问 [Python 官网](https://www.python.org/downloads/)
2. 下载最新的 Python 3.10+ 安装包
3. 运行安装程序
4. **重要**：勾选 "Add Python to PATH"
5. 点击 "Install Now"

**验证安装**：
```bash
python --version
pip --version
```

**Mac 用户**：

```bash
# 使用 Homebrew 安装
brew install python@3.10
```

**Linux 用户**：

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.10 python3-pip

# CentOS/RHEL
sudo yum install python310 python3-pip
```

#### 3.1.3 创建虚拟环境（推荐）

**为什么需要虚拟环境？**
- 隔离项目依赖
- 避免版本冲突
- 保持系统 Python 环境干净

**创建虚拟环境**：

```bash
# 创建项目目录
mkdir mcp-learning
cd mcp-learning

# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows:
venv\Scripts\activate

# Mac/Linux:
source venv/bin/activate
```

**激活成功的标志**：
命令行前面会出现 `(venv)` 标记

```bash
(venv) C:\Users\YourName\mcp-learning>
```

---

### 3.2 Node.js 环境搭建

#### 3.2.1 检查 Node.js 版本

**要求**：Node.js 18 或更高版本

```bash
node --version
npm --version
```

**期望输出**：
```
v18.x.x 或更高
9.x.x 或更高
```

#### 3.2.2 安装 Node.js（如果未安装）

**Windows/Mac 用户**：

1. 访问 [Node.js 官网](https://nodejs.org/)
2. 下载 LTS（长期支持）版本
3. 运行安装程序
4. 一路 "Next" 完成安装

**验证安装**：
```bash
node --version
npm --version
```

**Linux 用户**：

```bash
# 使用 NodeSource 仓库
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

---

### 3.3 包管理工具安装

#### 3.3.1 Python 包管理：uv

**uv** 是一个现代化的 Python 包管理工具，比 pip 更快、更可靠。

**为什么选择 uv？**
- 速度快（比 pip 快 10-100 倍）
- 依赖解析更准确
- MCP 官方推荐

**安装 uv**：

**Windows**：
```bash
# 使用 PowerShell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Mac/Linux**：
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**验证安装**：
```bash
uv --version
```

**基本使用**：

```bash
# 安装包
uv pip install package-name

# 运行脚本
uv run script.py

# 创建虚拟环境
uv venv
```

#### 3.3.2 Node.js 包管理：pnpm

**pnpm** 是一个高效的 Node.js 包管理器。

**为什么选择 pnpm？**
- 节省磁盘空间
- 安装速度快
- 严格的依赖管理

**安装 pnpm**：

```bash
npm install -g pnpm
```

**验证安装**：
```bash
pnpm --version
```

**基本使用**：

```bash
# 安装依赖
pnpm install

# 添加包
pnpm add package-name

# 运行脚本
pnpm run script
```

---

### 3.4 LLM 服务准备

#### 3.4.1 为什么需要 LLM 服务？

MCP 的核心场景是让 LLM 调用工具，所以你需要一个可用的 LLM API。

#### 3.4.2 LLM 服务选择

**国内推荐**（无需翻墙）：

1. **DeepSeek**
   - 官网：https://platform.deepseek.com/
   - 特点：性价比高，兼容 OpenAI API
   - 价格：新用户有免费额度

2. **通义千问（阿里云）**
   - 官网：https://dashscope.aliyun.com/
   - 特点：国内访问稳定
   - 价格：有免费试用

3. **文心一言（百度）**
   - 官网：https://cloud.baidu.com/product/wenxinworkshop
   - 特点：中文能力强
   - 价格：有免费额度

**国际选择**：

1. **OpenAI**
   - 官网：https://platform.openai.com/
   - 特点：最强大的 GPT-4
   - 需要：国际信用卡

2. **Anthropic Claude**
   - 官网：https://www.anthropic.com/
   - 特点：安全性高，上下文长
   - 需要：国际支付方式

#### 3.4.3 获取 API Key（以 DeepSeek 为例）

**步骤**：

1. **注册账号**
   - 访问 https://platform.deepseek.com/
   - 点击"注册"
   - 使用手机号或邮箱注册

2. **获取 API Key**
   - 登录后，进入"API Keys"页面
   - 点击"创建新的 API Key"
   - 复制并保存 API Key（只显示一次！）

3. **配置环境变量**

**Windows**：
```bash
# 临时设置（当前会话有效）
set DEEPSEEK_API_KEY=your_api_key_here

# 永久设置
setx DEEPSEEK_API_KEY "your_api_key_here"
```

**Mac/Linux**：
```bash
# 编辑 ~/.bashrc 或 ~/.zshrc
echo 'export DEEPSEEK_API_KEY="your_api_key_here"' >> ~/.bashrc
source ~/.bashrc
```

**使用 .env 文件（推荐）**：

在项目根目录创建 `.env` 文件：

```env
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
```

**安全提示**：
- ⚠️ 不要将 API Key 提交到 Git
- ⚠️ 不要在代码中硬编码 API Key
- ✅ 使用环境变量或 .env 文件
- ✅ 将 `.env` 添加到 `.gitignore`

#### 3.4.4 测试 LLM 连接

**Python 测试脚本**：

```python
import os
from openai import OpenAI

# 初始化客户端
client = OpenAI(
    api_key=os.getenv("DEEPSEEK_API_KEY"),
    base_url="https://api.deepseek.com"
)

# 测试调用
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        {"role": "user", "content": "你好，请介绍一下你自己"}
    ]
)

print(response.choices[0].message.content)
```

**运行测试**：
```bash
python test_llm.py
```

**期望输出**：
```
你好！我是 DeepSeek，一个 AI 助手...
```

---

## 4. 推荐阅读资料

### 4.1 官方文档

1. **MCP 官方文档**
   - 网址：https://modelcontextprotocol.io/
   - 内容：协议规范、架构设计、最佳实践
   - 建议：先快速浏览，了解整体架构

2. **MCP Python SDK**
   - 网址：https://github.com/modelcontextprotocol/python-sdk
   - 内容：Python 实现、示例代码
   - 建议：查看 examples 目录

3. **MCP TypeScript SDK**
   - 网址：https://github.com/modelcontextprotocol/typescript-sdk
   - 内容：TypeScript 实现、示例代码
   - 建议：查看 examples 目录

### 4.2 中文入门文章

1. **Model Context Protocol(MCP) 编程极速入门**
   - 作者：liaokongvfx
   - 特点：中文详细讲解，适合快速上手

2. **MCP 初学者教程**
   - 来源：Microsoft MCP for Beginners
   - 特点：系统化课程，包含多语言示例

### 4.3 视频教程（可选）

- 搜索关键词："MCP Model Context Protocol 教程"
- 平台：B站、YouTube

---

## 5. 环境验证与测试

### 5.1 Python 环境验证清单

```bash
# 1. 检查 Python 版本
python --version
# 期望：Python 3.10.x 或更高

# 2. 检查 pip
pip --version

# 3. 检查 uv（如果已安装）
uv --version

# 4. 测试安装 MCP SDK
pip install mcp

# 5. 验证导入
python -c "import mcp; print('MCP SDK 安装成功！')"
```

### 5.2 Node.js 环境验证清单

```bash
# 1. 检查 Node.js 版本
node --version
# 期望：v18.x.x 或更高

# 2. 检查 npm
npm --version

# 3. 检查 pnpm（如果已安装）
pnpm --version

# 4. 创建测试项目
mkdir mcp-test && cd mcp-test
npm init -y

# 5. 测试安装 MCP SDK
npm install @modelcontextprotocol/sdk

# 6. 验证安装
node -e "console.log('MCP SDK 安装成功！')"
```

### 5.3 完整环境测试脚本

**Python 版本**：

创建 `test_environment.py`：

```python
#!/usr/bin/env python3
"""
MCP 环境测试脚本
"""

import sys
import os

def test_python_version():
    """测试 Python 版本"""
    version = sys.version_info
    print(f"✓ Python 版本: {version.major}.{version.minor}.{version.micro}")
    if version.major >= 3 and version.minor >= 10:
        print("  ✓ 版本符合要求（>= 3.10）")
        return True
    else:
        print("  ✗ 版本不符合要求，需要 Python 3.10+")
        return False

def test_mcp_sdk():
    """测试 MCP SDK"""
    try:
        import mcp
        print(f"✓ MCP SDK 已安装")
        return True
    except ImportError:
        print("✗ MCP SDK 未安装")
        print("  请运行: pip install mcp")
        return False

def test_api_key():
    """测试 API Key"""
    api_key = os.getenv("DEEPSEEK_API_KEY")
    if api_key:
        print(f"✓ API Key 已配置")
        print(f"  Key 前缀: {api_key[:10]}...")
        return True
    else:
        print("✗ API Key 未配置")
        print("  请设置环境变量 DEEPSEEK_API_KEY")
        return False

def main():
    print("=" * 50)
    print("MCP 环境测试")
    print("=" * 50)
    print()
    
    results = []
    results.append(test_python_version())
    results.append(test_mcp_sdk())
    results.append(test_api_key())
    
    print()
    print("=" * 50)
    if all(results):
        print("✓ 所有测试通过！环境配置完成！")
    else:
        print("✗ 部分测试失败，请检查上述错误信息")
    print("=" * 50)

if __name__ == "__main__":
    main()
```

**运行测试**：
```bash
python test_environment.py
```

---

## 6. 常见问题解答

### Q1: Python 版本太低怎么办？

**A**: 安装多个 Python 版本可以共存：

```bash
# Windows: 下载并安装 Python 3.10+
# 使用 py 启动器指定版本
py -3.10 --version

# Mac: 使用 pyenv 管理多版本
brew install pyenv
pyenv install 3.10.0
pyenv global 3.10.0

# Linux: 使用 deadsnakes PPA
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.10
```

### Q2: uv 安装失败怎么办？

**A**: 使用 pip 作为替代：

```bash
# uv 的所有功能都可以用 pip 替代
pip install package-name  # 代替 uv pip install
python script.py          # 代替 uv run script.py
```

### Q3: 无法访问国外网站怎么办？

**A**: 使用国内镜像：

```bash
# Python 包使用清华镜像
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple package-name

# npm 使用淘宝镜像
npm config set registry https://registry.npmmirror.com
```

### Q4: API Key 泄露了怎么办？

**A**: 立即采取以下措施：

1. 登录 API 平台，删除泄露的 Key
2. 生成新的 API Key
3. 检查是否有异常使用记录
4. 更新代码中的 Key
5. 确保 `.env` 文件在 `.gitignore` 中

### Q5: 虚拟环境激活失败？

**A**: 常见解决方案：

```bash
# Windows PowerShell 执行策略问题
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# 然后重新激活
venv\Scripts\activate

# 或使用 activate.bat
venv\Scripts\activate.bat
```

### Q6: 如何卸载并重新开始？

**A**: 清理步骤：

```bash
# 删除虚拟环境
rm -rf venv  # Mac/Linux
rmdir /s venv  # Windows

# 重新创建
python -m venv venv
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate  # Windows

# 重新安装依赖
pip install -r requirements.txt
```

### Q7: MCP SDK 安装失败？

**A**: 尝试以下方法：

```bash
# 方法1：升级 pip
python -m pip install --upgrade pip

# 方法2：使用国内镜像
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple mcp

# 方法3：从源码安装
pip install git+https://github.com/modelcontextprotocol/python-sdk.git
```

### Q8: 如何验证环境是否正确配置？

**A**: 运行以下命令：

```bash
# Python 环境
python -c "import sys; print(f'Python {sys.version}')"
python -c "import mcp; print('MCP OK')"

# Node.js 环境
node -v
npm -v

# API Key
echo $DEEPSEEK_API_KEY  # Mac/Linux
echo %DEEPSEEK_API_KEY%  # Windows
```

---

## 🎯 阶段 0 完成检查清单

完成以下所有项目，即可进入阶段 1：

- [ ] 理解 MCP 的基本概念和价值
- [ ] 理解 LLM 和工具调用的原理
- [ ] 掌握 JSON、HTTP、异步编程基础
- [ ] 选择了学习语言（Python 或 TypeScript）
- [ ] Python 3.10+ 或 Node.js 18+ 已安装
- [ ] 包管理工具（uv/pip 或 pnpm/npm）已配置
- [ ] LLM API Key 已获取并配置
- [ ] 环境测试脚本运行成功
- [ ] 阅读了 MCP 官方 Introduction
- [ ] 浏览了至少一篇中文入门文章

---

## 📝 下一步

恭喜你完成了阶段 0！现在你已经：

✅ 理解了 MCP 的基本概念  
✅ 掌握了必要的前置知识  
✅ 搭建好了开发环境  
✅ 准备好了 LLM 服务  

**接下来**，你将进入：

👉 **阶段 1：MCP 整体认知与核心概念**

在阶段 1 中，你将学习：
- MCP 的整体架构
- Host、Server、Client 的角色
- Tools、Resources、Prompts 的概念
- 连接与传输方式

---

## 📚 附录：快速参考

### 常用命令速查

**Python**：
```bash
python --version          # 查看版本
pip install package       # 安装包
pip list                  # 查看已安装包
python script.py          # 运行脚本
python -m venv venv       # 创建虚拟环境
```

**Node.js**：
```bash
node --version            # 查看版本
npm install package       # 安装包
npm list                  # 查看已安装包
node script.js            # 运行脚本
npm init                  # 初始化项目
```

**Git**：
```bash
git init                  # 初始化仓库
git add .                 # 添加所有文件
git commit -m "message"   # 提交
git status                # 查看状态
```

### 环境变量设置

**Windows**：
```bash
# 临时设置
set VAR_NAME=value

# 永久设置
setx VAR_NAME "value"

# 查看
echo %VAR_NAME%
```

**Mac/Linux**：
```bash
# 临时设置
export VAR_NAME=value

# 永久设置（添加到 ~/.bashrc 或 ~/.zshrc）
echo 'export VAR_NAME=value' >> ~/.bashrc
source ~/.bashrc

# 查看
echo $VAR_NAME
```

### .gitignore 模板

```gitignore
# Python
venv/
__pycache__/
*.pyc
*.pyo
.env

# Node.js
node_modules/
.env

# IDE
.vscode/
.idea/
*.swp

# OS
.DS_Store
Thumbs.db
```

---

## 🎓 学习建议

1. **循序渐进**：不要急于求成，每个概念都要理解透彻
2. **动手实践**：理论结合实践，多写代码
3. **记录笔记**：记录学习过程中的问题和解决方案
4. **参与社区**：加入 MCP 相关的技术社区，交流学习
5. **持续学习**：MCP 在快速发展，保持关注最新动态

---

## 📞 获取帮助

如果遇到问题，可以通过以下渠道获取帮助：

1. **官方文档**：https://modelcontextprotocol.io/
2. **GitHub Issues**：
   - Python SDK: https://github.com/modelcontextprotocol/python-sdk/issues
   - TypeScript SDK: https://github.com/modelcontextprotocol/typescript-sdk/issues
3. **技术社区**：
   - Stack Overflow（标签：model-context-protocol）
   - Reddit: r/MachineLearning
4. **中文社区**：
   - 掘金、CSDN、知乎等技术平台

---

**祝你学习愉快！🚀**

> 本文档最后更新：2025年11月
> 
> 如有任何问题或建议，欢迎反馈！
